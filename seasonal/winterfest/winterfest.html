<link
	href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Amatic+SC"
	rel="stylesheet"
	type="text/css"
/>

<div id="winterfest"></div>

<style type="text/css">
	html {
		background: #c6c6c6;
	}

	#winterfest {
		font-size: 10px;
		height: 97em;
		margin: 0 auto;
		position: relative;
		width: 77em;
	}

	#winterfest a {
		border: 3px solid white;
		border-radius: 2px;
		box-sizing: border-box;
		display: inline-block;
		font-family: 'Amatic SC', Helvetica, sans-serif;
		left: 50%;
		overflow: hidden;
		position: absolute;
		top: 50%;
		transform: translate(-50%, -50%);
	}

	#winterfest a:after {
		align-items: center;
		background: inherit;
		bottom: 0;
		color: white;
		content: attr(data-number);
		display: flex;
		font-size: inherit;
		justify-content: center;
		left: 0;
		position: absolute;
		right: 0;
		top: 0;
		transition: 0.9s ease all;
	}

	#winterfest .slot-1,
	#winterfest .slot-2 {
		height: 25em;
		width: 25em;
	}

	#winterfest .slot-1:after,
	#winterfest .slot-2:after {
		font-size: 12em;
	}

	#winterfest .slot-3,
	#winterfest .slot-4,
	#winterfest .slot-11,
	#winterfest .slot-12,
	#winterfest .slot-13,
	#winterfest .slot-14 {
		height: 19em;
		width: 19em;
	}

	#winterfest .slot-3:after,
	#winterfest .slot-4:after,
	#winterfest .slot-11:after,
	#winterfest .slot-12:after,
	#winterfest .slot-13:after,
	#winterfest .slot-14:after {
		font-size: 11em;
	}

	#winterfest .slot-5,
	#winterfest .slot-6 {
		height: 15em;
		width: 15em;
	}

	#winterfest .slot-5:after,
	#winterfest .slot-6:after {
		font-size: 9em;
	}

	#winterfest .slot-7,
	#winterfest .slot-8 {
		height: 13em;
		width: 13em;
	}

	#winterfest .slot-7:after,
	#winterfest .slot-8:after {
		font-size: 8em;
	}

	#winterfest .slot-9,
	#winterfest .slot-10 {
		height: 11em;
		width: 11em;
	}

	#winterfest .slot-9:after,
	#winterfest .slot-10:after {
		font-size: 7em;
	}

	#winterfest .slot-15,
	#winterfest .slot-16,
	#winterfest .slot-17,
	#winterfest .slot-18,
	#winterfest .slot-19,
	#winterfest .slot-20 {
		height: 9em;
		width: 9em;
	}

	#winterfest .slot-15:after,
	#winterfest .slot-16:after,
	#winterfest .slot-17:after,
	#winterfest .slot-18:after,
	#winterfest .slot-19:after,
	#winterfest .slot-20:after {
		font-size: 6em;
	}

	#winterfest .slot-21,
	#winterfest .slot-22,
	#winterfest .slot-23,
	#winterfest .slot-24 {
		height: 5em;
		width: 5em;
	}

	#winterfest .slot-21:after,
	#winterfest .slot-22:after,
	#winterfest .slot-23:after,
	#winterfest .slot-24:after {
		font-size: 3em;
	}

	#winterfest .slot-1 {
		margin-left: -13em;
		margin-top: 5em;
	}
	#winterfest .slot-2 {
		margin-left: 13em;
		margin-top: -5em;
	}
	#winterfest .slot-3 {
		margin-left: -10em;
		margin-top: -18em;
	}
	#winterfest .slot-4 {
		margin-left: 10em;
		margin-top: 18em;
	}
	#winterfest .slot-5 {
		margin-left: 18em;
		margin-top: 36em;
	}
	#winterfest .slot-6 {
		margin-left: -18em;
		margin-top: -36em;
	}
	#winterfest .slot-7 {
		margin-left: -27em;
		margin-top: -21em;
	}
	#winterfest .slot-8 {
		margin-left: 27em;
		margin-top: 21em;
	}
	#winterfest .slot-9 {
		margin-left: -32em;
		margin-top: 2em;
	}
	#winterfest .slot-10 {
		margin-left: 32em;
		margin-top: -2em;
	}
	#winterfest .slot-11 {
		margin-left: -20em;
		margin-top: 28em;
	}
	#winterfest .slot-12 {
		margin-left: 20em;
		margin-top: -28em;
	}
	#winterfest .slot-13 {
		margin-left: 0;
		margin-top: 38em;
	}
	#winterfest .slot-14 {
		margin-left: 0;
		margin-top: -38em;
	}
	#winterfest .slot-15 {
		margin-left: 31em;
		margin-top: 9em;
	}
	#winterfest .slot-16 {
		margin-left: -31em;
		margin-top: -9em;
	}
	#winterfest .slot-17 {
		margin-left: -31em;
		margin-top: 13em;
	}
	#winterfest .slot-18 {
		margin-left: 31em;
		margin-top: -13em;
	}
	#winterfest .slot-19 {
		margin-left: 5em;
		margin-top: -23em;
	}
	#winterfest .slot-20 {
		margin-left: -5em;
		margin-top: 23em;
	}
	#winterfest .slot-21 {
		margin-left: -13em;
		margin-top: 41em;
	}
	#winterfest .slot-22 {
		margin-left: 13em;
		margin-top: -41em;
	}
	#winterfest .slot-23 {
		margin-left: -23em;
		margin-top: -11em;
	}
	#winterfest .slot-24 {
		margin-left: 23em;
		margin-top: 11em;
	}

	#winterfest a.open:after {
		transform: translate(-100%, -100%) rotate(-30deg);
	}

	#winterfest img {
		height: 100%;
		object-fit: cover;
		opacity: 0;
		width: 100%;
	}

	#winterfest .open img {
		opacity: 1;
	}
</style>

<script type="text/javascript">
	function getClosestAnchor(root, element) {
		if (element === root) return

		return element.tagName === 'A'
			? element
			: getClosestAnchor(root, element.parentElement)
	}

	document.addEventListener('DOMContentLoaded', () => {
		const winterfest = document.getElementById('winterfest')
		let open = JSON.parse(localStorage.getItem('winterfest')) || []

		function createLink({ background, link = '#testing', number, src, slot }) {
			const image = document.createElement('img')
			const anchor = document.createElement('a')

			image.setAttribute('src', src)
			anchor.setAttribute('id', 'day-' + number)
			anchor.dataset.number = number
			anchor.setAttribute('style', 'background: ' + background)

			if (link) {
				anchor.setAttribute('href', link)
				anchor.setAttribute('target', '_blank')
			}

			if (slot) {
				anchor.classList.add('slot-' + slot)
			}

			anchor.appendChild(image)
			winterfest.appendChild(anchor)
		}

		const links = [
			{
				background: '#ac84c0',
				link: undefined,
				src: './sparkles.gif',
			},
			{
				background: '#ace4d8',
				link: undefined,
				src: './star.gif',
			},
			{
				background: '#a9dbd7',
				link: undefined,
				src: './sparkles.gif',
			},
			{
				background: '#fbebdb',
				link: undefined,
				src: './heart.gif',
			},
			{
				background: '#ff93a3',
				link: undefined,
				src: './star.gif',
			},
			{
				background: '#f7a170',
				link: undefined,
				src: './sparkles.gif',
			},
			{
				background: '#509e7c',
				link: undefined,
				src: './star.gif',
			},
			{
				background: '#9cf3e0',
				link: undefined,
				src: './heart.gif',
			},
			{
				background: '#d1aa98',
				link: undefined,
				src: './sparkles.gif',
			},
			{
				background: '#d3c3b3',
				link: undefined,
				src: './heart.gif',
			},
			{
				background: '#ff93a3',
				link: undefined,
				src: './playing.gif',
			},
			{
				background: '#a9dbd7',
				link: undefined,
				src: './snowglobe.gif',
			},
			{
				background: '#f7a170',
				link: undefined,
				src: './fire.gif',
			},
			{
				background: '#fbebdb',
				link: undefined,
				src: './factory.gif',
			},
			{
				background: '#a9dbd7',
				link: undefined,
				src: './love.gif',
			},
			{
				background: '#ff93a3',
				link: undefined,
				src: './stormy.gif',
			},
			{
				background: '#fbebdb',
				link: undefined,
				src: './tree.gif',
			},
			{
				background: '#ac84c0',
				link: undefined,
				src: './cuddle.gif',
			},
			{
				background: '#509e7c',
				link: undefined,
				src: './toys.gif',
			},
			{
				background: '#9cf3e0',
				link: undefined,
				src: './unicorn.gif',
			},
			{
				background: '#d1aa98',
				link: undefined,
				src: './cookies.gif',
			},
			{
				background: '#c4b2a4',
				link: undefined,
				src: './aftermath.gif',
			},
			{
				background: '#82a4d8',
				link: undefined,
				src: './singing.gif',
			},
			{
				background: '#f5c876',
				link: undefined,
				src: './wreath.gif',
			},
		]

		links.forEach((item, index, array) =>
			createLink(
				Object.assign(item, {
					number: index + 1,
					slot: array.length - index,
				})
			)
		)

		winterfest.addEventListener('click', event => {
			const anchor = getClosestAnchor(winterfest, event.target)

			if (
				!anchor ||
				!anchor.getAttribute('href') ||
				anchor.getAttribute('href') === '#'
			) {
				event.preventDefault()
				return
			}

			if (!anchor.classList.contains('open')) {
				event.preventDefault()
				anchor.classList.add('open')
				open.push(anchor.getAttribute('id').replace('day-', ''))
				localStorage.setItem('winterfest', JSON.stringify(open))
			} else {
				event.preventDefault()
				anchor.classList.remove('open')
				open = open.filter(
					id => id !== anchor.getAttribute('id').replace('day-', '')
				)
				localStorage.setItem('winterfest', JSON.stringify(open))
			}
		})

		open.forEach(number => {
			document.getElementById('day-' + number).classList.add('open')
		})
	})
</script>
